{"version":3,"file":"confirm.min.js","sources":["../src/confirm.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Confirm handler which uses show_confirm_dialog and allowing callback actions\n *\n * @copyright  2022 Matthias Tylkowski <matthias.tylkowski@b-tu.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Selectors from './local/confirm/selectors';\n\nconst registerEventListeners = () => {\n    document.addEventListener('click', e => {\n        let dataholder;\n        if (e.target && (dataholder = e.target.closest(Selectors.actions.confirmButton))) {\n            M.util.show_confirm_dialog(e, {\n                message: dataholder.dataset.message,\n                callback: () => {\n                    const targetUrl = new URL(dataholder.getAttribute('href'));\n                    targetUrl.searchParams.append('sesskey', dataholder.dataset.sesskey);\n                    targetUrl.searchParams.append('confirm', 1);\n                    window.location = targetUrl.toString();\n                }\n            });\n        }\n    });\n};\n\nexport const init = () => {\n    registerEventListeners();\n};\n"],"names":["document","addEventListener","e","dataholder","target","closest","Selectors","actions","confirmButton","M","util","show_confirm_dialog","message","dataset","callback","targetUrl","URL","getAttribute","searchParams","append","sesskey","window","location","toString"],"mappings":";;;;;;8JAyCoB,KAhBhBA,SAASC,iBAAiB,SAASC,QAC3BC,WACAD,EAAEE,SAAWD,WAAaD,EAAEE,OAAOC,QAAQC,mBAAUC,QAAQC,iBAC7DC,EAAEC,KAAKC,oBAAoBT,EAAG,CAC1BU,QAAST,WAAWU,QAAQD,QAC5BE,SAAU,WACAC,UAAY,IAAIC,IAAIb,WAAWc,aAAa,SAClDF,UAAUG,aAAaC,OAAO,UAAWhB,WAAWU,QAAQO,SAC5DL,UAAUG,aAAaC,OAAO,UAAW,GACzCE,OAAOC,SAAWP,UAAUQ"}